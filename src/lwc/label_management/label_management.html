<!--
 - Created by Adelchi on 26/03/2020.
 -->



<template >
    <!--    <h2 class="slds-text-heading_medium slds-m-bottom_medium">-->
    <!--        Any Label Component-->
    <!--    </h2>-->
    <!--    <div class="slds-float&#45;&#45;right">-->
    <!--    </div>-->

    <template if:true={showModal}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open" >
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <lightning-button-icon class="slds-modal__close" title="Close" icon-name="utility:close" icon-class="slds-button_icon-inverse" onclick={handleDialogClose} >
                        <span class="slds-assistive-text">Close</span>
                    </lightning-button-icon>
                    <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">Manage Labels</h2>
                </header>
                <lightning-tabset>
                    <lightning-tab label="Existing Labels">
                        <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1" >
                            <label for="objectLabels">Labels currently associated with <span style="color: crimson; font-weight: bold">{objectApiName} </span></label>
                            <div class="slds-pill-container slds-listbox slds-listbox_horizontal current" ondrop={drop_handler} ondragover={dragover_handler} id="objectLabels">
                                <div > </div>
                                <template for:each={allLabelsList} for:item="allLabel" >
                                    <div class="slds-pill" draggable="true" key={allLabel} ondrag={drag_handler} ondragstart={dragstart_handler} ondragend={dragend_handler} data-id={allLabel}>
                            <span class="slds-m-around--xx-small">
                                {allLabel}
                            </span>
                                        <button class="slds-button slds-button_icon slds-button_icon slds-pill__remove" title="Remove"  onclick={removeFromAvailableLabels} >
                                            <lightning-icon icon-name="utility:close" data-target-id={allLabel}>
                                            </lightning-icon>
                                            <span class="slds-assistive-text">Remove</span>
                                        </button>
                                    </div>
                                </template>
                            </div>
                            <label for="globalLabels">Labels Available <span style="color: crimson; font-weight: bold">to be Assigned </span></label>
                            <div class="slds-pill-container slds-listbox slds-listbox_horizontal global" ondrop={drop_handler} ondragover={dragover_handler} id="globalLabels">
                                <div > </div>
                                <template for:each={globalLabelsList} for:item="globalLabel" >
                                    <div class="slds-pill" draggable="true" key={globalLabel.Name} ondrag={drag_handler} ondragstart={dragstart_handler} ondragend={dragend_handler} data-id={globalLabel.Name}>
                            <span class="slds-m-around--xx-small">
                                {globalLabel.Name}
                            </span>
                                        <button class="slds-button slds-button_icon slds-button_icon slds-pill__remove" title="Remove"  onclick={removeFromAvailableLabels} >
                                            <lightning-icon icon-name="utility:close" data-target-id={globalLabel.Name}>
                                                <!--                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"></use>-->
                                            </lightning-icon>
                                            <span class="slds-assistive-text">Remove</span>
                                        </button>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </lightning-tab>
                    <lightning-tab label="Create New Label" >
                        <div class="slds-modal__content slds-p-left--large slds-p-bottom--large" id="modal-content-id-2" >
                            <lightning-input id="name" label="Name" style="width: 50%; margin-bottom: 6px" ></lightning-input>
                            <lightning-input type="color" name="input-color" style="width: 50%; margin-bottom: 6px" label="Favorite color" value={labelColor} onchange={getColor}></lightning-input>
                            <lightning-button class="slds-button" style="margin-top: 5px" label="Save" onclick={createNewLabel}>
                            </lightning-button>
                        </div>
                    </lightning-tab>
                </lightning-tabset>
            </div>
            <footer class="slds-modal__footer modal-hidden">
            </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>


    <div class="slds-pill-container current" ondrop={drop_handler} ondragover={dragover_handler}>
        <div > </div>
        <template for:each={labelsList} for:item="assignedLabel" >
            <div class="slds-pill" draggable="true" key={assignedLabel} ondrag={drag_handler} ondragstart={dragstart_handler} ondragend={dragend_handler} data-id={assignedLabel}>
                <span class="slds-m-around--xx-small">
                                {assignedLabel}
                            </span>
            </div>
        </template>
        <!--        </ul>-->
    </div>
    <div class="slds-pill-container available" ondrop={drop_handler} ondragover={dragover_handler} >
        <div > </div>
        <template for:each={labelsAvailable} for:item="labelAvailable">
            <div class="slds-pill grab" draggable="true" key={labelAvailable} ondrag={drag_handler} ondragstart={dragstart_handler} ondragend={dragend_handler} data-id={labelAvailable} onmousedown= {grabbing}>
                            <span class="slds-m-around--xx-small">
                                {labelAvailable}
                            </span>
                <!--                <button class="slds-button slds-button_icon slds-button_icon slds-pill__remove" title="Remove"  onclick={removeFromAvailableLabels} >-->
                <!--                    <lightning-icon icon-name="utility:close" data-target-id={labelAvailable} >-->
                <!--                        &lt;!&ndash;                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"></use>&ndash;&gt;-->
                <!--                    </lightning-icon>-->
                <!--                    <span class="slds-assistive-text">Remove</span>-->
                <!--                </button>-->
            </div>
        </template>
        <!--        </ul>-->
    </div>
    <lightning-button-group >
        <lightning-button  title="open" label="Manage Labels" onclick={toggleModal} disabled={isAdmin}></lightning-button>
        <lightning-button title="save" label="Save" onclick={saveLabels}></lightning-button>
    </lightning-button-group>

    <!--    <div id="target" ondrop={drop_handler} ondragover={dragover_handler}>Drop Zone</div>-->


    <!--    <br class="slds-m-top_medium slds-m-bottom_x-large">-->
    <!--    <h2 class="slds-text-heading_medium slds-m-bottom_medium">-->
    <!--        Any Label Component-->
    <!--    </h2>-->

    <!--    Label color>> {labelColor}</br>-->
    <!--    Font color >> {fontColor}</br>-->
    <!--    Labels List >> -->
    <!--    <ul>-->
    <!--        <template for:each={labelsList.data} for:item="label">-->
    <!--            <li key={label}>{label}</li>-->
    <!--        </template>-->
    <!--    </ul>-->
    <!--    All Labels List >>-->
    <!--    <ul>-->
    <!--        <template for:each={allLabelsList.data} for:item="label">-->
    <!--            <li key={label}>{label}</li>-->
    <!--        </template>-->
    <!--    </ul>-->

    <!--    <div class="slds-p-around_medium lgc-bg">-->
    <!--        <lightning-input type="color" name="input-color" label="Favorite color" value={labelColor} onchange={getColor}></lightning-input>-->
    <!--    </div>-->
    <!--    <div class="slds-pill-container"  >-->
    <!--        <ul class="container" >-->
    <!--            <template for:each={allLabelsList.data} for:item="labelAvailable">-->
    <!--                <li class="slds-pill" draggable="true" key={labelAvailable} ondragstart={labelDragStart} ondrag= {labelDragOver} >-->
    <!--                    <span class="slds-m-around&#45;&#45;xx-small">-->
    <!--                        {labelAvailable}-->
    <!--                    </span>-->
    <!--                </li>-->
    <!--            </template>-->
    <!--        </ul>-->
    <!--    </div>-->
    <!--    <div class="slds-pill-container" >-->
    <!--        <ul class="container"  >-->
    <!--            <template for:each={labelsList.data} for:item="assignedLabel" >-->
    <!--                <li class="slds-pill" draggable="true" key={assignedLabel} ondragstart={labelDragStart} ondrag={labelDragOver}>-->
    <!--                    <span class="slds-m-around&#45;&#45;xx-small">-->
    <!--                        {assignedLabel}-->
    <!--                    </span>-->
    <!--                </li>-->
    <!--            </template>-->
    <!--        </ul>-->
    <!--    </div>-->
</template>


