<!--
 - Created by Adelchi on 26/03/2020.
 -->



<template >
    <!--    <h2 class="slds-text-heading_medium slds-m-bottom_medium">-->
    <!--        Any Label Component-->
    <!--    </h2>-->
    <!--    <div class="slds-float&#45;&#45;right">-->
    <!--    </div>-->

    <template if:true={showModal} >
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open" >
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <lightning-button-icon class="slds-modal__close" title="Close" icon-name="utility:close" icon-class="slds-button_icon-inverse" onclick={handleDialogClose} >
                        <span class="slds-assistive-text">Close</span>
                    </lightning-button-icon>
                    <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">Manage <span style="font-weight: bold">{objectApiName}</span> Labels</h2>
                </header>
                <lightning-tabset >
                    <lightning-tab label="All"  title="Displays ALL Labels: Assigned and Available">
                        <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1" >
                            <label for="objectLabels">Labels currently <span style="color: crimson; font-weight: bold">associated</span> with {objectApiName}</label>
                            <div class="slds-pill-container slds-listbox slds-listbox_horizontal associated scroll" ondrop={removeFromAvailableLabels} ondragover={dragover_handler} id="objectLabels">
                                <div > </div>
                                <template for:each={allAssignedObjectLabList} for:item="allLabel" >
                                    <div class="slds-pill" style={allLabel.Styling} draggable="true" key={allLabel.Name} ondrag={drag_handler} ondragstart={dragstart_handler} ondragend={dragend_handler} data-id={allLabel.Name}>
                            <span class="slds-m-around--xx-small">
                                {allLabel.Name}
                            </span>
                                        <button class="slds-button slds-button_icon slds-button_icon slds-pill__remove" title="Remove"  onclick={removeFromAvailableLabels} >
                                            <lightning-icon icon-name="utility:close" data-target-id={allLabel.Name}>
                                            </lightning-icon>
                                            <span class="slds-assistive-text">Remove</span>
                                        </button>
                                    </div>
                                </template>
                            </div>
                            <table class="slds-size--2-of-2 slds-m-bottom_xx-small slds-m-top_medium">
                                <tr>
                                    <td>
                                        <div class="slds-size--1-of-2">
                                            <label  for="globalLabels">Labels <span style="color: crimson; font-weight: bold">available</span></label>
                                        </div>
                                    </td>
                                    <td>
                                        <input class="slds-input slds-size--1-of-2 slds-float_right" label="Filter" placeholder="filter by name ..." onkeyup={filterLabel} ></input>
                                    </td>
                                </tr>
                            </table>
                            <div class="slds-pill-container slds-listbox slds-listbox_horizontal global scroll" ondrop={removeFromAvailableLabels} ondragover={dragover_handler} id="globalLabels">
                                <div > </div>
                                <template for:each={allUnassignedObjectLabList} for:item="globalLabel" >
                                    <div class="slds-pill" draggable="true" key={globalLabel.Name} style={globalLabel.Styling} ondrag={drag_handler} ondragstart={dragstart_handler} ondragend={dragend_handler} data-id={globalLabel.Name}>
                                        <span class="slds-m-around--xx-small">
                                            {globalLabel.Name}
                                        </span>
                                        <button class="slds-button slds-button_icon slds-button_icon slds-pill__remove " title="Remove"  onclick={removeFromAvailableLabels} >
                                            <div style="background-color: #b0c4df; border-radius: 2px">
                                                <lightning-icon icon-name="utility:close" data-target-id={globalLabel.Name}>
                                                <!--                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"></use>-->
                                            </lightning-icon>
                                            </div>
                                            <span class="slds-assistive-text">Remove</span>
                                        </button>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </lightning-tab>
                    <lightning-tab label="Create New"  title="New Labels will be available ONLY for current object" >
                        <div class="slds-modal__content slds-p-left--large slds-p-bottom--large" id="modal-content-id-2" >
                            <input class="slds-input  slds-size--1-of-2" style={labelSample} required id="name" label="Name" placeholder="enter label name here"></input>
                            <lightning-input class="hex" required type="color" name="input-color" style="width: 50%; margin-bottom: 6px" label="Favorite color" value={labelColor} onchange={getColor}></lightning-input>
                            <lightning-button class="slds-button" style="margin-top: 5px" label="Save" onclick={createNewLabel}>
                            </lightning-button>
                        </div>
                    </lightning-tab>
                </lightning-tabset>
            </div>
            <footer class="slds-modal__footer modal-hidden">
            </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
    <div class="slds-pill-container current" ondrop={drop_handler} ondragover={dragover_handler} onclick={openAvailableLabels}>
        <div ></div>
        <template for:each={labelsList} for:item="assignedLabel" >
            <div class="slds-pill grab" style={assignedLabel.Styling} draggable="true" key={assignedLabel.Name} ondrag={drag_handler} ondragstart={dragstart_handler} ondragend={dragend_handler}  data-id={assignedLabel.Name} onmousedown={grabbing} onmouseup={grab} >
                <span class="slds-m-around--xx-small" >
                                {assignedLabel.Name}
                </span>
            </div>
        </template>
    </div>
    <div class="availableContainer close">
        <div class="slds-pill-container available " ondrop={drop_handler} ondragover={dragover_handler} >
            <div></div>
            <template for:each={labelsAvailable} for:item="labelAvailable">
                <div class="slds-pill grab" style={labelAvailable.Styling}  draggable="true" key={labelAvailable.Name} ondrag={drag_handler} ondragstart={dragstart_handler} ondragend={dragend_handler} data-id={labelAvailable.Name} onmousedown={grabbing} onmouseup={grab}>
                            <span class="slds-m-around--xx-small">
                                {labelAvailable.Name}
                            </span>
                    <!--                <button class="slds-button slds-button_icon slds-button_icon slds-pill__remove" title="Remove"  onclick={removeFromAvailableLabels} >-->
                    <!--                    <lightning-icon icon-name="utility:close" data-target-id={labelAvailable} >-->
                    <!--                        &lt;!&ndash;                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"></use>&ndash;&gt;-->
                    <!--                    </lightning-icon>-->
                    <!--                    <span class="slds-assistive-text">Remove</span>-->
                    <!--                </button>-->
                </div>
            </template>
        </div>
        <div>
            <button class="slds-button slds-text-link_reset slds-float--right slds-text-color_destructive"  title="open" label="Manage Labels" onclick={toggleModal} disabled={isAdmin}>Manage Labels</button>
        </div>
        <button class="slds-button slds-button--inverse" style="margin-top: 5px" title="save" label="Save" onclick={saveLabels}>Save</button>
    </div>
<!--    <lightning-button-group >-->
<!--        <lightning-button  title="open" label="Manage Labels" onclick={toggleModal} disabled={isAdmin}></lightning-button>-->
<!--    </lightning-button-group>-->

    <!--    <div id="target" ondrop={drop_handler} ondragover={dragover_handler}>Drop Zone</div>-->


    <!--    <br class="slds-m-top_medium slds-m-bottom_x-large">-->
    <!--    <h2 class="slds-text-heading_medium slds-m-bottom_medium">-->
    <!--        Any Label Component-->
    <!--    </h2>-->

    <!--    Label color>> {labelColor}</br>-->
    <!--    Font color >> {fontColor}</br>-->
    <!--    Labels List >> -->
    <!--    <ul>-->
    <!--        <template for:each={labelsList.data} for:item="label">-->
    <!--            <li key={label}>{label}</li>-->
    <!--        </template>-->
    <!--    </ul>-->
    <!--    All Labels List >>-->
    <!--    <ul>-->
    <!--        <template for:each={allLabelsList.data} for:item="label">-->
    <!--            <li key={label}>{label}</li>-->
    <!--        </template>-->
    <!--    </ul>-->

    <!--    <div class="slds-p-around_medium lgc-bg">-->
    <!--        <lightning-input type="color" name="input-color" label="Favorite color" value={labelColor} onchange={getColor}></lightning-input>-->
    <!--    </div>-->
    <!--    <div class="slds-pill-container"  >-->
    <!--        <ul class="container" >-->
    <!--            <template for:each={allLabelsList.data} for:item="labelAvailable">-->
    <!--                <li class="slds-pill" draggable="true" key={labelAvailable} ondragstart={labelDragStart} ondrag= {labelDragOver} >-->
    <!--                    <span class="slds-m-around&#45;&#45;xx-small">-->
    <!--                        {labelAvailable}-->
    <!--                    </span>-->
    <!--                </li>-->
    <!--            </template>-->
    <!--        </ul>-->
    <!--    </div>-->
    <!--    <div class="slds-pill-container" >-->
    <!--        <ul class="container"  >-->
    <!--            <template for:each={labelsList.data} for:item="assignedLabel" >-->
    <!--                <li class="slds-pill" draggable="true" key={assignedLabel} ondragstart={labelDragStart} ondrag={labelDragOver}>-->
    <!--                    <span class="slds-m-around&#45;&#45;xx-small">-->
    <!--                        {assignedLabel}-->
    <!--                    </span>-->
    <!--                </li>-->
    <!--            </template>-->
    <!--        </ul>-->
    <!--    </div>-->
</template>


